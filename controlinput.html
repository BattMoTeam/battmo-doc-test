<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Control models &mdash; BattMo  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/sphinx_collapse.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/battmologo.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Optimisation" href="optimisation.html" />
    <link rel="prev" title="Thermal model" href="thermal.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            BattMo
              <img src="_static/battmologo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="basicusage.html">Basic Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="basicusage.html#a-first-battmo-model">A First <strong>BattMo</strong> Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="basicusage.html#define-parameters">Define Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="basicusage.html#run-simulation">Run Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="basicusage.html#show-the-dashboard">Show the Dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="basicusage.html#explore-the-output">Explore the Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="basicusage.html#explore-the-grid">Explore the Grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="basicusage.html#explore-the-states">Explore the States</a></li>
<li class="toctree-l3"><a class="reference internal" href="basicusage.html#plot-a-result">Plot a Result</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="basicusage.html#change-control-parameters">Change Control Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="basicusage.html#change-structural-parameters">Change Structural Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="basicusage.html#change-material-parameters">Change Material Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="basicusage.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="intermediate.html">Intermediate usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intermediate.html#pseudo-four-dimensional-p4d-model">Pseudo-Four-Dimensional (P4D) Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="intermediate.html#define-parameters">Define Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="intermediate.html#run-simulation">Run Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="intermediate.html#visualize-results">Visualize Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="intermediate.html#direct-insertion-using-parsebattmojson">Direct insertion using <code class="code docutils literal notranslate"><span class="pre">parseBattmoJson</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="intermediate.html#merge-function-using-mergejsonstructs">Merge function using <code class="code docutils literal notranslate"><span class="pre">mergeJsonStructs</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="advancedtopics.html">Advanced Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="modelinitialisation.html">Model initialisation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="modelinitialisation.html#how-to-initialise-the-model">How to initialise the model</a></li>
<li class="toctree-l3"><a class="reference internal" href="modelinitialisation.html#calculating-intial-concentration">Calculating intial concentration</a></li>
<li class="toctree-l3"><a class="reference internal" href="modelinitialisation.html#calculating-initial-potential">Calculating initial potential</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="thermal.html">Thermal Simulation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Control models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#json-input-interface">Json input interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="optimisation.html">Optimisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="parsets.html">Parameter sets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parsets.html#chen-2020">Chen 2020</a></li>
<li class="toctree-l3"><a class="reference internal" href="parsets.html#safari-2009">Safari 2009</a></li>
<li class="toctree-l3"><a class="reference internal" href="parsets.html#xu-2015">Xu 2015</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">BattMo Model Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html">Battery cell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#BatteryInputParams"><code class="docutils literal notranslate"><span class="pre">BatteryInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BatteryInputParams.NegativeElectrode"><code class="docutils literal notranslate"><span class="pre">BatteryInputParams.NegativeElectrode</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BatteryInputParams.PositiveElectrode"><code class="docutils literal notranslate"><span class="pre">BatteryInputParams.PositiveElectrode</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BatteryInputParams.Electrolyte"><code class="docutils literal notranslate"><span class="pre">BatteryInputParams.Electrolyte</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BatteryInputParams.Separator"><code class="docutils literal notranslate"><span class="pre">BatteryInputParams.Separator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BatteryInputParams.ThermalModel"><code class="docutils literal notranslate"><span class="pre">BatteryInputParams.ThermalModel</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BatteryInputParams.Control"><code class="docutils literal notranslate"><span class="pre">BatteryInputParams.Control</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html#electrode">Electrode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#ElectrodeInputParams"><code class="docutils literal notranslate"><span class="pre">ElectrodeInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ElectrodeInputParams.Coating"><code class="docutils literal notranslate"><span class="pre">ElectrodeInputParams.Coating</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ElectrodeInputParams.CurrentCollector"><code class="docutils literal notranslate"><span class="pre">ElectrodeInputParams.CurrentCollector</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html#coating">Coating</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#CoatingInputParams"><code class="docutils literal notranslate"><span class="pre">CoatingInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#CoatingInputParams.ActiveMaterial"><code class="docutils literal notranslate"><span class="pre">CoatingInputParams.ActiveMaterial</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#CoatingInputParams.Binder"><code class="docutils literal notranslate"><span class="pre">CoatingInputParams.Binder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#CoatingInputParams.ConductingAdditive"><code class="docutils literal notranslate"><span class="pre">CoatingInputParams.ConductingAdditive</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html#active-material">Active Material</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#ActiveMaterialInputParams"><code class="docutils literal notranslate"><span class="pre">ActiveMaterialInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ActiveMaterialInputParams.Interface"><code class="docutils literal notranslate"><span class="pre">ActiveMaterialInputParams.Interface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ActiveMaterialInputParams.SolidDiffusion"><code class="docutils literal notranslate"><span class="pre">ActiveMaterialInputParams.SolidDiffusion</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ActiveMaterialInputParams.electronicConductivity"><code class="docutils literal notranslate"><span class="pre">ActiveMaterialInputParams.electronicConductivity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ActiveMaterialInputParams.density"><code class="docutils literal notranslate"><span class="pre">ActiveMaterialInputParams.density</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ActiveMaterialInputParams.massFraction"><code class="docutils literal notranslate"><span class="pre">ActiveMaterialInputParams.massFraction</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ActiveMaterialInputParams.thermalConductivity"><code class="docutils literal notranslate"><span class="pre">ActiveMaterialInputParams.thermalConductivity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ActiveMaterialInputParams.specificHeatCapacity"><code class="docutils literal notranslate"><span class="pre">ActiveMaterialInputParams.specificHeatCapacity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ActiveMaterialInputParams.diffusionModelType"><code class="docutils literal notranslate"><span class="pre">ActiveMaterialInputParams.diffusionModelType</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html#binder">Binder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#BinderInputParams"><code class="docutils literal notranslate"><span class="pre">BinderInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BinderInputParams.electronicConductivity"><code class="docutils literal notranslate"><span class="pre">BinderInputParams.electronicConductivity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BinderInputParams.density"><code class="docutils literal notranslate"><span class="pre">BinderInputParams.density</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BinderInputParams.massFraction"><code class="docutils literal notranslate"><span class="pre">BinderInputParams.massFraction</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BinderInputParams.thermalConductivity"><code class="docutils literal notranslate"><span class="pre">BinderInputParams.thermalConductivity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#BinderInputParams.specificHeatCapacity"><code class="docutils literal notranslate"><span class="pre">BinderInputParams.specificHeatCapacity</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html#conducting-additive">Conducting Additive</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#ConductingAdditiveInputParams"><code class="docutils literal notranslate"><span class="pre">ConductingAdditiveInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ConductingAdditiveInputParams.electronicConductivity"><code class="docutils literal notranslate"><span class="pre">ConductingAdditiveInputParams.electronicConductivity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ConductingAdditiveInputParams.density"><code class="docutils literal notranslate"><span class="pre">ConductingAdditiveInputParams.density</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ConductingAdditiveInputParams.massFraction"><code class="docutils literal notranslate"><span class="pre">ConductingAdditiveInputParams.massFraction</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ConductingAdditiveInputParams.thermalConductivity"><code class="docutils literal notranslate"><span class="pre">ConductingAdditiveInputParams.thermalConductivity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ConductingAdditiveInputParams.specificHeatCapacity"><code class="docutils literal notranslate"><span class="pre">ConductingAdditiveInputParams.specificHeatCapacity</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html#interface">Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#InterfaceInputParams"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.saturationConcentration"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.saturationConcentration</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.numberOfElectronsTransferred"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.numberOfElectronsTransferred</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.volumeFraction"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.volumeFraction</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.volumetricSurfaceArea"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.volumetricSurfaceArea</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.activationEnergyOfReaction"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.activationEnergyOfReaction</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.reactionRateConstant"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.reactionRateConstant</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.exchangeCurrentDensity"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.exchangeCurrentDensity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.guestStoichiometry100"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.guestStoichiometry100</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.guestStoichiometry0"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.guestStoichiometry0</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.density"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.density</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.openCircuitPotential"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.openCircuitPotential</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#InterfaceInputParams.chargeTransferCoefficient"><code class="docutils literal notranslate"><span class="pre">InterfaceInputParams.chargeTransferCoefficient</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html#solid-diffusion-models">Solid Diffusion Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#SolidDiffusionModelInputParams"><code class="docutils literal notranslate"><span class="pre">SolidDiffusionModelInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#SolidDiffusionModelInputParams.particleRadius"><code class="docutils literal notranslate"><span class="pre">SolidDiffusionModelInputParams.particleRadius</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#SolidDiffusionModelInputParams.activationEnergyOfDiffusion"><code class="docutils literal notranslate"><span class="pre">SolidDiffusionModelInputParams.activationEnergyOfDiffusion</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#SolidDiffusionModelInputParams.referenceDiffusionCoefficient"><code class="docutils literal notranslate"><span class="pre">SolidDiffusionModelInputParams.referenceDiffusionCoefficient</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#SolidDiffusionModelInputParams.volumetricSurfaceArea"><code class="docutils literal notranslate"><span class="pre">SolidDiffusionModelInputParams.volumetricSurfaceArea</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#FullSolidDiffusionModelInputParams"><code class="docutils literal notranslate"><span class="pre">FullSolidDiffusionModelInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#FullSolidDiffusionModelInputParams.diffusionCoefficient"><code class="docutils literal notranslate"><span class="pre">FullSolidDiffusionModelInputParams.diffusionCoefficient</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#FullSolidDiffusionModelInputParams.saturationConcentration"><code class="docutils literal notranslate"><span class="pre">FullSolidDiffusionModelInputParams.saturationConcentration</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#FullSolidDiffusionModelInputParams.guestStoichiometry100"><code class="docutils literal notranslate"><span class="pre">FullSolidDiffusionModelInputParams.guestStoichiometry100</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#FullSolidDiffusionModelInputParams.guestStoichiometry0"><code class="docutils literal notranslate"><span class="pre">FullSolidDiffusionModelInputParams.guestStoichiometry0</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#SimplifiedSolidDiffusionModelInputParams"><code class="docutils literal notranslate"><span class="pre">SimplifiedSolidDiffusionModelInputParams</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html#electrolyte">Electrolyte</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#ElectrolyteInputParams"><code class="docutils literal notranslate"><span class="pre">ElectrolyteInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ElectrolyteInputParams.density"><code class="docutils literal notranslate"><span class="pre">ElectrolyteInputParams.density</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ElectrolyteInputParams.ionicConductivity"><code class="docutils literal notranslate"><span class="pre">ElectrolyteInputParams.ionicConductivity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ElectrolyteInputParams.diffusionCoefficient"><code class="docutils literal notranslate"><span class="pre">ElectrolyteInputParams.diffusionCoefficient</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ElectrolyteInputParams.bruggemanCoefficient"><code class="docutils literal notranslate"><span class="pre">ElectrolyteInputParams.bruggemanCoefficient</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ElectrolyteInputParams.thermalConductivity"><code class="docutils literal notranslate"><span class="pre">ElectrolyteInputParams.thermalConductivity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ElectrolyteInputParams.specificHeatCapacity"><code class="docutils literal notranslate"><span class="pre">ElectrolyteInputParams.specificHeatCapacity</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html#current-collector">Current Collector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#CurrentCollectorInputParams"><code class="docutils literal notranslate"><span class="pre">CurrentCollectorInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#CurrentCollectorInputParams.thermalConductivity"><code class="docutils literal notranslate"><span class="pre">CurrentCollectorInputParams.thermalConductivity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#CurrentCollectorInputParams.specificHeatCapacity"><code class="docutils literal notranslate"><span class="pre">CurrentCollectorInputParams.specificHeatCapacity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#CurrentCollectorInputParams.density"><code class="docutils literal notranslate"><span class="pre">CurrentCollectorInputParams.density</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batteryinput.html#electronic-component">Electronic Component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batteryinput.html#ElectronicComponentInputParams"><code class="docutils literal notranslate"><span class="pre">ElectronicComponentInputParams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="batteryinput.html#ElectronicComponentInputParams.electronicConductivity"><code class="docutils literal notranslate"><span class="pre">ElectronicComponentInputParams.electronicConductivity</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="json.html">JSON input specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="json.html#material-parameters">Material Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="json.html#electrolyte">Electrolyte</a></li>
<li class="toctree-l3"><a class="reference internal" href="json.html#electrode">Electrode</a></li>
<li class="toctree-l3"><a class="reference internal" href="json.html#coating">Coating</a></li>
<li class="toctree-l3"><a class="reference internal" href="json.html#interface">Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="json.html#solid-diffusion">Solid Diffusion</a></li>
<li class="toctree-l3"><a class="reference internal" href="json.html#current-collector">Current Collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="json.html#separator">Separator</a></li>
<li class="toctree-l3"><a class="reference internal" href="json.html#thermal-model">Thermal Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="json.html#geometry-setup">Geometry Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="json.html#simulation-control-parameters">Simulation Control Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="json.html#time-stepping-parameters">Time Stepping Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="json.html#solver-parameters">Solver Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="json.html#output-parameters">Output Parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="geometryinput.html">Battery Geometries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="geometryinput.html#batterygeneratorp2d">BatteryGeneratorP2D</a><ul>
<li class="toctree-l3"><a class="reference internal" href="geometryinput.html#BatteryGeneratorP2D"><code class="docutils literal notranslate"><span class="pre">BatteryGeneratorP2D</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="geometryinput.html#batterygeneratorp3d">BatteryGeneratorP3D</a><ul>
<li class="toctree-l3"><a class="reference internal" href="geometryinput.html#BatteryGeneratorP3D"><code class="docutils literal notranslate"><span class="pre">BatteryGeneratorP3D</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="geometryinput.html#batterygeneratorp4d">BatteryGeneratorP4D</a><ul>
<li class="toctree-l3"><a class="reference internal" href="geometryinput.html#BatteryGeneratorP4D"><code class="docutils literal notranslate"><span class="pre">BatteryGeneratorP4D</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="geometryinput.html#spiralbatterygenerator">SpiralBatteryGenerator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="geometryinput.html#SpiralBatteryGenerator"><code class="docutils literal notranslate"><span class="pre">SpiralBatteryGenerator</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="geometryinput.html#coincellbatterygenerator">CoinCellBatteryGenerator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="geometryinput.html#CoinCellBatteryGenerator"><code class="docutils literal notranslate"><span class="pre">CoinCellBatteryGenerator</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="geometryinput.html#blockbatterygenerator">BlockBatteryGenerator</a></li>
<li class="toctree-l2"><a class="reference internal" href="geometryinput.html#coincellsectorbatterygenerator">CoinCellSectorBatteryGenerator</a></li>
<li class="toctree-l2"><a class="reference internal" href="geometryinput.html#flatbatterygenerator">FlatBatteryGenerator</a></li>
<li class="toctree-l2"><a class="reference internal" href="geometryinput.html#sectorbatterygenerator">SectorBatteryGenerator</a></li>
<li class="toctree-l2"><a class="reference internal" href="geometryinput.html#base-class">Base class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="geometryinput.html#BatteryGenerator"><code class="docutils literal notranslate"><span class="pre">BatteryGenerator</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="juliabridge.html">Julia bridge</a><ul>
<li class="toctree-l2"><a class="reference internal" href="juliabridge.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="juliabridge.html#setup-and-use">Setup and Use</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">BattMo GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="publishedExamples/runElectrolyser.html">Electrolyser simulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="publishedExamples/runElectrolyser.html#load-mrst-modules">Load MRST modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="publishedExamples/runElectrolyser.html#setup-input">Setup input</a></li>
<li class="toctree-l2"><a class="reference internal" href="publishedExamples/runElectrolyser.html#setup-model">Setup model</a></li>
<li class="toctree-l2"><a class="reference internal" href="publishedExamples/runElectrolyser.html#setup-the-initial-condition">Setup the initial condition</a></li>
<li class="toctree-l2"><a class="reference internal" href="publishedExamples/runElectrolyser.html#setup-the-schedule-with-the-time-discretization">Setup the schedule with the time discretization</a></li>
<li class="toctree-l2"><a class="reference internal" href="publishedExamples/runElectrolyser.html#setup-the-non-linear-solver">Setup the non-linear solver</a></li>
<li class="toctree-l2"><a class="reference internal" href="publishedExamples/runElectrolyser.html#run-the-simulation">Run the simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="publishedExamples/runElectrolyser.html#visualize-the-results">Visualize the results</a></li>
<li class="toctree-l2"><a class="reference internal" href="publishedExamples/runElectrolyser.html#ph-distribution-plot">pH distribution plot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="seealso.html">See Also</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mrst.html">MRST</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mrst.html#id1">Visualization Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="mrst.html#id2">Grid Factory Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fair.html">FAIR Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BattMo</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="advancedtopics.html">Advanced Usage</a></li>
      <li class="breadcrumb-item active">Control models</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/controlinput.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="control-models">
<h1>Control models<a class="headerlink" href="#control-models" title="Link to this heading"></a></h1>
<p>The battery <a class="reference external" href="https://github.com/BattMoTeam/BattMo/blob/dev/Battery/Battery.m#L19">model</a> contains a <em>Control</em> sub-model, see the overall model structure
<a class="reference internal" href="architecture.html#battmo-model-architecture"><span class="std std-ref">description</span></a>. The Control model determine the control <em>values</em> and <em>type</em>.</p>
<p>At a <strong>given time</strong>, there are in general two control types:</p>
<ul class="simple">
<li><p>Total current</p></li>
<li><p>Voltage</p></li>
</ul>
<p>Given a control type, the control <em>value</em> can change in time.</p>
<section id="json-input-interface">
<h2>Json input interface<a class="headerlink" href="#json-input-interface" title="Link to this heading"></a></h2>
<p>The most standard controls can be called from BattMo using the json interface:</p>
<ul class="simple">
<li><p>Constant Current Discharge (CCDischarge)</p></li>
<li><p>Constant Current Charge (CCCharge)</p></li>
<li><p>Constant Current Constant Voltage (CCCV)</p></li>
</ul>
<p>The parameters for each of the model are described in the json schema <a class="reference external" href="https://github.com/BattMoTeam/BattMo/blob/dev/Utilities/JsonSchemas/ControlModel.schema.json">ControlModel.schema.json</a>. Let us review them by looking at examples. For all controls, we have
a given <code class="code docutils literal notranslate"><span class="pre">CRate</span></code>. The property <code class="code docutils literal notranslate"><span class="pre">controlPolicy</span></code> is used to set the control model.</p>
<p><strong>Constant Current Discharge</strong></p>
<p>Before the simulation starts, the capacity of the battery is computed. The battery capacity value is used to compute the
given input current from the CRate value. For a constant current discharge, we have a lower cutoff voltage where the
simulation stops.  The parameter <code class="code docutils literal notranslate"><span class="pre">useCVswitch</span></code> can be used if we want to continue the simulation until a given
fixed time, by switching to voltage control. At the start of the simulation, strong non-linearities in the equations may
create difficulties to reach the activation potential. For this reason, there is the possibility to use a <em>rampup time</em>
where the current is gradually increased from zero to the targeted given input current.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="nt">&quot;Control&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;controlPolicy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CCDischarge&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;rampupTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;CRate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;lowerCutoffVoltage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.4</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For the dataset given <a class="reference external" href="https://github.com/BattMoTeam/BattMo/blob/dev/ParameterData/BatteryCellParameters/LithiumIonBatteryCell/lithium_ion_battery_nmc_graphite.json">here</a>, we obtain the
following result.</p>
<figure class="align-center" id="id1">
<a class="reference external image-reference" href="_images/controlExampleCCDischarge.png"><img alt="_images/controlExampleCCDischarge.png" src="_images/controlExampleCCDischarge.png" style="width: 70%;" /></a>
<figcaption>
<p><span class="caption-text">Constant Current Discharge control</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p><strong>Constant Current Charge</strong></p>
<p>In the same way as the discharge case, the capacity of the battery is computed first to set the given input current from
the CRate. When the upper cuttoff voltage limit is reached, the control type is switched to voltage control. Also in
this case, we can include a rampup time. As an example,</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="nt">&quot;Control&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;controlPolicy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CCCharge&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;rampupTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;CRate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;upperCutoffVoltage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">4.1</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For the dataset given <a class="reference external" href="https://github.com/BattMoTeam/BattMo/blob/dev/ParameterData/BatteryCellParameters/LithiumIonBatteryCell/lithium_ion_battery_nmc_graphite.json">here</a>, we obtain the
following result.</p>
<figure class="align-center" id="id2">
<a class="reference external image-reference" href="_images/controlExampleCCCharge.png"><img alt="_images/controlExampleCCCharge.png" src="_images/controlExampleCCCharge.png" style="width: 70%;" /></a>
<figcaption>
<p><span class="caption-text">Constant Current Charge control</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p><strong>Constant Current Constant Charge</strong></p>
<p>An example of input is</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="nt">&quot;Control&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;controlPolicy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CCCV&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;CRate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;initialControl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;discharging&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;numberOfCycles&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;lowerCutoffVoltage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.4</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;upperCutoffVoltage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">4.1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;dIdtLimit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1e-5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;dEdtLimit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1e-5</span>
<span class="p">},</span>
</pre></div>
</div>
<p>The control type and value are set following the following procedure. In the case above, we start by discharging</p>
<ol class="arabic simple">
<li><p>We use a constant discharge current computed from the capacity and the given CRate. We keep this value until the
lower cutoff voltage value is reached. Then, we switch to step 2.</p></li>
<li><p>The control is set to zero. At each time step we compute the time derivative of the voltage
<span class="math notranslate nohighlight">\(\frac{dE}{dt}\)</span>. When this value reach the limit given by <code class="code docutils literal notranslate"><span class="pre">dEdtLimit</span></code>. We start the charge step 3.</p></li>
<li><p>We use a constant charge current. The value is the same as in step 1, with opposite sign. We keep this current until
the lower cutoff voltage limit is reached. Then we switch to constant voltage control step 4.</p></li>
<li><p>We use a constant voltage given by the cutoff value and monitor the current derivative <span class="math notranslate nohighlight">\(\frac{dI}{dt}\)</span>. When
this value is lower than <code class="code docutils literal notranslate"><span class="pre">dIdtLimit</span></code>, we start again the discharge by going to step 1.</p></li>
</ol>
<p>We iterate this process for the given number of cycles. For the dataset given <a class="reference external" href="https://github.com/BattMoTeam/BattMo/blob/dev/ParameterData/BatteryCellParameters/LithiumIonBatteryCell/lithium_ion_battery_nmc_graphite.json">here</a>, we obtain the
following result.</p>
<figure class="align-center" id="id3">
<a class="reference external image-reference" href="_images/controlExampleCCCV.png"><img alt="_images/controlExampleCCCV.png" src="_images/controlExampleCCCV.png" style="width: 70%;" /></a>
<figcaption>
<p><span class="caption-text">CCCV control</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The script used to generate the figures is available <a class="reference external" href="https://github.com/BattMoTeam/BattMo/blob/dev/Documentation/scripts/plotControlExamples.m">here</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="thermal.html" class="btn btn-neutral float-left" title="Thermal model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="optimisation.html" class="btn btn-neutral float-right" title="Optimisation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>